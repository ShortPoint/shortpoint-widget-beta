sap.ui.define(["./dm"],function(a){"use strict";function b(){var b=a.gtld();g(b),h(b)&&i(b).then(function(a){var c=null,d=!1;!a||a.error?c=b?b:j():(d=!0,c=a),e(c,d)})}function c(){var b=a.gtld(),c=i(b);return f(c)}function d(){var b=a.al();return f(b)}function e(b,c){c&&k(b),a.svd(b).then(g)}function f(a){var b=l();return a.done(function(a){!a||a.error?b.reject():(e(a,!0),b.resolve(a))}).fail(b.reject),b}function g(a){var b=!0,c=a||{};if(c.currentUserExpirationDate&&new Date(c.currentUserExpirationDate)<new Date){b=!1;for(var d in shortPointInserter.display.actions.list)"delete"!==d&&delete shortPointInserter.display.actions.list[d];shortPointInserter.display.destroy(),shortPointInserter.display.init();var e=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(d in e)delete n.FroalaEditor.COMMANDS[e[d]];n("html").addClass("spi-license-invalid")}b?shortpoint.config["font-class"]="serif":delete shortpoint.config["font-class"],shortpoint.publish("newLicenseInfo",{isValid:b,licenseType:c.licenseType,expirationDate:c.currentUserExpirationDate})}function h(a){if(!a||!a.lastCheckDate)return!0;var b=864e5,c=(new Date).getTime()-new Date(a.lastCheckDate).getTime();return c>b}function i(b){var c=null;return b&&b.currentUserStartDate&&(c=b.currentUserStartDate),a.gtsd(c,m)}function j(){var a=new Date,b=new Date(a.getTime());b.setDate(a.getDate()+30);var c={currentUserStartDate:a,currentUserExpirationDate:b,licenseType:"trial"};return c}function k(a){return a&&!a.error&&a.licenseType?(a.lastCheckDate=new Date,a):null}var l=jQuery.Deferred,m=3e4,n=shortpoint.dom.lib;shortpoint.util;return{c:b,gf:c,a:d}});