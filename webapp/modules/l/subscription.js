sap.ui.define(["./lm"],function(a){"use strict";var b=window.shortPointInserter,c=(b.util,b.ko),d=b.modules.getPrototype("moduleBase"),e=['<div id="spiSAPSubscription" class="spi-sap-subscription-root sp-inserter-full-height sp-inserter-subscription-module">','<div data-shortpoint-bind="if: l">','<div class="notification alert-warning">',"	<p><strong>Loading</strong></p>","</div>","</div>",'<div data-shortpoint-bind="ifnot: l">',"<h2>Subscription</h1>",'<div data-shortpoint-bind="html: a"></div>','<div data-shortpoint-bind="visible: b">',"<br />","<h2>Activations</h1>",'<div data-shortpoint-bind="if: c">','<p data-shortpoint-bind="html: d"></p>','<button data-shortpoint-bind="click: e">Activate My License</button>',"</div>",'<div data-shortpoint-bind="ifnot: c">',"<p>There are no activations available for your account</p>","<button>Buy from SAPStore.com</button>","</div>","</div>","</div></div>"].join("\n");return b.module("sap-subscription",{options:{inheritBase:!1},create:function(){d.create.apply(this,arguments);var a=this;this.l=c.observable(!0),this.a=c.observable(!0),this.b=c.observable(!1),this.c=c.observable(!1),this.d=c.observable(!1),this.e=function(){},shortpoint.subscribe("settingsDialogShown",function(){a.initData()})},show:function(){d.show.apply(this,arguments),this.initData()},hide:function(){d.hide.apply(this,arguments)},initData:function(){function b(a){a.then(c).then(f).fail(d)}function c(a){var b=new Date,c=a.currentUserExpirationDate?new Date(a.currentUserExpirationDate):null,d="";c&&(d=" You current license will expire "+c.toDateString());var f='<div class="notification alert-success"><p><strong>You have a valid license.'+d+"</strong></p></div>",g=c&&b>c;g&&(f='<div class="notification alert-error"><p><strong>Your license has expired</strong></p></div>',e(a)),k(g),j(f)}function d(){k(!1),j('<div class="notification alert-error"><p><strong>Unexpected error occurred. Please, try again later</strong></p></div>')}function e(a){var b=a.packageExpirationDate?new Date(a.packageExpirationDate):null,c=a.numOfActivationsAvailable,d=new Date;!c||!b||d>b?l(!1):(l(!0),m('<div class="notification alert-success"><p><strong>'+c+" activations are available for this account and valid until "+b.toDateString()+"</strong></p></div>"))}function f(){i(!1)}function g(){i(!0),b(a.a())}var h=this;if(!h.inited){h.inited=!0;var i=h.l,j=h.a,k=h.b,l=h.c,m=h.d;h.e=g,b(a.gf())}}}),{template:e}});