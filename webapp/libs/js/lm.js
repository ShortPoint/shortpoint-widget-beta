sap.ui.define(["./dm"],function(d0){"use strict";var g0=jQuery.Deferred,j=30*1000,$=shortpoint.dom.lib,k0=shortpoint.util;function n0(){var a0=d0.gtld();x0(a0);if(z0(a0)){H0(a0).then(function(n){var v=null,c2=false;if(!n||n.error){if(!a0){v=b0();}else{v=a0;}}else{c2=true;v=n;}q0(v,c2);});}}function q(){var n=d0.gtld(),v=H0(n);return z(v);}function w0(){var n=d0.al();return z(n);}function q0(n,v){if(v){J0(n);}d0.svd(n).then(x0);}function z(v){var c2=g0();v.done(function(n){if(!n||n.error){c2.reject();}else{q0(n,true);c2.resolve(n);}}).fail(c2.reject);return c2;}function x0(n){var v=true,c2=n||{};if(c2.currentUserExpirationDate&&new Date(c2.currentUserExpirationDate)<new Date()){v=false;for(var a0 in shortPointInserter.display.actions.list){if(a0!=="delete"){delete  shortPointInserter.display.actions.list[a0];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var g=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(a0 in g){delete  $.FroalaEditor.COMMANDS[g[a0]];}$("html").addClass("spi-license-invalid");}if(v){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:v,licenseType:c2.licenseType,expirationDate:c2.currentUserExpirationDate});}function z0(n){if(!n||!n.lastCheckDate){return true;}var v=1000*60*60*24,c2=(new Date()).getTime()-new Date(n.lastCheckDate).getTime();return c2>v;}function H0(n){var v=null;if(n&&n.currentUserStartDate){v=n.currentUserStartDate;}return d0.gtsd(v,j);}function b0(){var n=new Date(),v=new Date(n.getTime());v.setDate(n.getDate()+30);var c2={currentUserStartDate:n,currentUserExpirationDate:v,licenseType:"trial"};return c2;}function J0(n){if(!n||n.error||!n.licenseType){return null;}n.lastCheckDate=new Date();return n;}return {c:n0,gf:q,a:w0};});