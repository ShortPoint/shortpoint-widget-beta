sap.ui.define(["./dm"],function(a0){"use strict";var b0=jQuery.Deferred,d0=30*1000,$=shortpoint.dom.lib,h0=shortpoint.util;function i0(){var q=a0.gtld();v0(q);if(s0(q)){u0(q).then(function(g){var j=null,k=false;if(!g||g.error){if(!q){j=A0();}else{j=q;}}else{k=true;j=g;}k0(j,k);});}}function j0(){var g=a0.gtld(),j=u0(g);return q0(j);}function g0(){var g=a0.al();return q0(g);}function k0(g,j){if(j){z0(g);}a0.svd(g).then(v0);}function q0(j){var k=b0();j.done(function(g){if(!g||g.error){k.reject();}else{k0(g,true);k.resolve(g);}}).fail(k.reject);return k;}function v0(g){var j=true,k=g||{};if(k.currentUserExpirationDate&&new Date(k.currentUserExpirationDate)<new Date()){j=false;for(var q in shortPointInserter.display.actions.list){if(q!=="delete"){delete  shortPointInserter.display.actions.list[q];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var z=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(q in z){delete  $.FroalaEditor.COMMANDS[z[q]];}$("html").addClass("spi-license-invalid");}if(j){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:j,licenseType:k.licenseType,expirationDate:k.currentUserExpirationDate});}function s0(g){if(!g||!g.lastCheckDate){return true;}var j=1000*60*60*24,k=(new Date()).getTime()-new Date(g.lastCheckDate).getTime();return k>j;}function u0(g){var j=null;if(g&&g.currentUserStartDate){j=g.currentUserStartDate;}return a0.gtsd(j,d0);}function A0(){var g=new Date(),j=new Date(g.getTime());j.setDate(g.getDate()+30);var k={currentUserStartDate:g,currentUserExpirationDate:j,licenseType:"trial"};return k;}function z0(g){if(!g||g.error||!g.licenseType){return null;}g.lastCheckDate=new Date();return g;}return {c:i0,gf:j0,a:g0};});