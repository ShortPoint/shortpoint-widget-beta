sap.ui.define(["./dm"],function(k){"use strict";var w0=jQuery.Deferred,q=30*1000,$=shortpoint.dom.lib,x0=shortpoint.util;function a0(){var j0=k.gtld();c0(j0);if(f0(j0)){g0(j0).then(function(v){var e0=null,g=false;if(!v||v.error){if(!j0){e0=i0();}else{e0=j0;}}else{g=true;e0=v;}b0(e0,g);});}}function H0(){var v=k.gtld(),e0=g0(v);return I0(e0);}function J0(){var v=k.al();return I0(v);}function b0(v,e0){if(e0){l0(v);}k.svd(v).then(c0);}function I0(e0){var g=w0();e0.done(function(v){if(!v||v.error){g.reject();}else{b0(v,true);g.resolve(v);}}).fail(g.reject);return g;}function c0(v){var e0=true,g=v||{};if(g.currentUserExpirationDate&&new Date(g.currentUserExpirationDate)<new Date()){e0=false;for(var j0 in shortPointInserter.display.actions.list){if(j0!=="delete"){delete  shortPointInserter.display.actions.list[j0];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var j=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(j0 in j){delete  $.FroalaEditor.COMMANDS[j[j0]];}$("html").addClass("spi-license-invalid");}if(e0){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:e0,licenseType:g.licenseType,expirationDate:g.currentUserExpirationDate});}function f0(v){if(!v||!v.lastCheckDate){return true;}var e0=1000*60*60*24,g=(new Date()).getTime()-new Date(v.lastCheckDate).getTime();return g>e0;}function g0(v){var e0=null;if(v&&v.currentUserStartDate){e0=v.currentUserStartDate;}return k.gtsd(e0,q);}function i0(){var v=new Date(),e0=new Date(v.getTime());e0.setDate(v.getDate()+30);var g={currentUserStartDate:v,currentUserExpirationDate:e0,licenseType:"trial"};return g;}function l0(v){if(!v||v.error||!v.licenseType){return null;}v.lastCheckDate=new Date();return v;}return {c:a0,gf:H0,a:J0};});