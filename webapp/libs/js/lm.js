sap.ui.define(["./dm"],function(c0){"use strict";var e0=jQuery.Deferred,f0=30*1000,$=shortpoint.dom.lib,k0=shortpoint.util;function j0(){var z=c0.gtld();t0(z);if(z0(z)){G0(z).then(function(j){var k=null,q=false;if(!j||j.error){if(!z){k=A0();}else{k=z;}}else{q=true;k=j;}p0(k,q);});}}function m0(){var j=c0.gtld(),k=G0(j);return s0(k);}function o0(){var j=c0.al();return s0(j);}function p0(j,k){if(k){l0(j);}c0.svd(j).then(t0);}function s0(k){var q=e0();k.done(function(j){if(!j||j.error){q.reject();}else{p0(j,true);q.resolve(j);}}).fail(q.reject);return q;}function t0(j){var k=true,q=j||{};if(q.currentUserExpirationDate&&new Date(q.currentUserExpirationDate)<new Date()){k=false;for(var z in shortPointInserter.display.actions.list){if(z!=="delete"){delete  shortPointInserter.display.actions.list[z];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var a0=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(z in a0){delete  $.FroalaEditor.COMMANDS[a0[z]];}$("html").addClass("spi-license-invalid");}if(k){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:k,licenseType:q.licenseType,expirationDate:q.currentUserExpirationDate});}function z0(j){if(!j||!j.lastCheckDate){return true;}var k=1000*60*60*24,q=(new Date()).getTime()-new Date(j.lastCheckDate).getTime();return q>k;}function G0(j){var k=null;if(j&&j.currentUserStartDate){k=j.currentUserStartDate;}return c0.gtsd(k,f0);}function A0(){var j=new Date(),k=new Date(j.getTime());k.setDate(j.getDate()+30);var q={currentUserStartDate:j,currentUserExpirationDate:k,licenseType:"trial"};return q;}function l0(j){if(!j||j.error||!j.licenseType){return null;}j.lastCheckDate=new Date();return j;}return {c:j0,gf:m0,a:o0};});