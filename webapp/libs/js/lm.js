sap.ui.define(["./dm"],function(a0){"use strict";var d0=jQuery.Deferred,g0=30*1000,$=shortpoint.dom.lib,p0=shortpoint.util;function s0(){var v=a0.gtld();A0(v);if(G0(v)){B0(v).then(function(k){var n=null,q=false;if(!k||k.error){if(!v){n=z0();}else{n=v;}}else{q=true;n=k;}y0(n,q);});}}function i0(){var k=a0.gtld(),n=B0(k);return o0(n);}function x0(){var k=a0.al();return o0(k);}function y0(k,n){if(n){F0(k);}a0.svd(k).then(A0);}function o0(n){var q=d0();n.done(function(k){if(!k||k.error){q.reject();}else{y0(k,true);q.resolve(k);}}).fail(q.reject);return q;}function A0(k){var n=true,q=k||{};if(q.currentUserExpirationDate&&new Date(q.currentUserExpirationDate)<new Date()){n=false;for(var v in shortPointInserter.display.actions.list){if(v!=="delete"){delete  shortPointInserter.display.actions.list[v];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var z=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(v in z){delete  $.FroalaEditor.COMMANDS[z[v]];}$("html").addClass("spi-license-invalid");}if(n){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:n,licenseType:q.licenseType,expirationDate:q.currentUserExpirationDate});}function G0(k){if(!k||!k.lastCheckDate){return true;}var n=1000*60*60*24,q=(new Date()).getTime()-new Date(k.lastCheckDate).getTime();return q>n;}function B0(k){var n=null;if(k&&k.currentUserStartDate){n=k.currentUserStartDate;}return a0.gtsd(n,g0);}function z0(){var k=new Date(),n=new Date(k.getTime());n.setDate(k.getDate()+30);var q={currentUserStartDate:k,currentUserExpirationDate:n,licenseType:"trial"};return q;}function F0(k){if(!k||k.error||!k.licenseType){return null;}k.lastCheckDate=new Date();return k;}return {c:s0,gf:i0,a:x0};});