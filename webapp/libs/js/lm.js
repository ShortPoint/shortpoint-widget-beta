sap.ui.define(["./dm"],function(W4){"use strict";var U5=jQuery.Deferred,V5=30*1000,$=shortpoint.dom.lib,z6=shortpoint.util;function a0(){var G3=W4.gtld();T5(G3);if(X5(G3)){h0(G3).then(function(V1){var B2=null,Y2=false;if(!V1||V1.error){if(!G3){B2=k0();}else{B2=G3;}}else{Y2=true;B2=V1;}e0(B2,Y2);});}}function W5(){var V1=W4.gtld(),B2=h0(V1);return q(B2);}function c0(){var V1=W4.al();return q(V1);}function e0(V1,B2){if(B2){Y5(V1);}W4.svd(V1).then(T5);}function q(B2){var Y2=U5();B2.done(function(V1){if(!V1||V1.error){Y2.reject();}else{e0(V1,true);Y2.resolve(V1);}}).fail(Y2.reject);return Y2;}function T5(V1){var B2=true,Y2=V1||{};if(Y2.currentUserExpirationDate&&new Date(Y2.currentUserExpirationDate)<new Date()){B2=false;for(var G3 in shortPointInserter.display.actions.list){if(G3!=="delete"){delete  shortPointInserter.display.actions.list[G3];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var S5=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(G3 in S5){delete  $.FroalaEditor.COMMANDS[S5[G3]];}$("html").addClass("spi-license-invalid");}if(B2){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:B2,licenseType:Y2.licenseType,expirationDate:Y2.currentUserExpirationDate});}function X5(V1){if(!V1||!V1.lastCheckDate){return true;}var B2=1000*60*60*24,Y2=(new Date()).getTime()-new Date(V1.lastCheckDate).getTime();return Y2>B2;}function h0(V1){var B2=null;if(V1&&V1.currentUserStartDate){B2=V1.currentUserStartDate;}return W4.gtsd(B2,V5);}function k0(){var V1=new Date(),B2=new Date(V1.getTime());B2.setDate(V1.getDate()+30);var Y2={currentUserStartDate:V1,currentUserExpirationDate:B2,licenseType:"trial"};return Y2;}function Y5(V1){if(!V1||V1.error||!V1.licenseType){return null;}V1.lastCheckDate=new Date();return V1;}return {c:a0,gf:W5,a:c0};});