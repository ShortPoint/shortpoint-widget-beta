sap.ui.define(["./dm"],function(a0){"use strict";var d0=jQuery.Deferred,b0=30*1000,$=shortpoint.dom.lib,g0=shortpoint.util;function l0(){var v=a0.gtld();x0(v);if(s0(v)){H0(v).then(function(j){var k=null,q=false;if(!j||j.error){if(!v){k=J0();}else{k=v;}}else{q=true;k=j;}v0(k,q);});}}function m0(){var j=a0.gtld(),k=H0(j);return r0(k);}function u0(){var j=a0.al();return r0(j);}function v0(j,k){if(k){Q0(j);}a0.svd(j).then(x0);}function r0(k){var q=d0();k.done(function(j){if(!j||j.error){q.reject();}else{v0(j,true);q.resolve(j);}}).fail(q.reject);return q;}function x0(j){var k=true,q=j||{};if(q.currentUserExpirationDate&&new Date(q.currentUserExpirationDate)<new Date()){k=false;for(var v in shortPointInserter.display.actions.list){if(v!=="delete"){delete  shortPointInserter.display.actions.list[v];}}shortPointInserter.display.destroy();shortPointInserter.display.init();var z=["demoContent","insertSection","insertShortPoint","upgrade","html"];for(v in z){delete  $.FroalaEditor.COMMANDS[z[v]];}$("html").addClass("spi-license-invalid");}if(k){shortpoint.config["font-class"]="serif";}else{delete  shortpoint.config["font-class"];}shortpoint.publish("newLicenseInfo",{isValid:k,licenseType:q.licenseType,expirationDate:q.currentUserExpirationDate});}function s0(j){if(!j||!j.lastCheckDate){return true;}var k=1000*60*60*24,q=(new Date()).getTime()-new Date(j.lastCheckDate).getTime();return q>k;}function H0(j){var k=null;if(j&&j.currentUserStartDate){k=j.currentUserStartDate;}return a0.gtsd(k,b0);}function J0(){var j=new Date(),k=new Date(j.getTime());k.setDate(j.getDate()+30);var q={currentUserStartDate:j,currentUserExpirationDate:k,licenseType:"trial"};return q;}function Q0(j){if(!j||j.error||!j.licenseType){return null;}j.lastCheckDate=new Date();return j;}return {c:l0,gf:m0,a:u0};});